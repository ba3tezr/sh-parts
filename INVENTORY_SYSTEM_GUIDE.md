# 📦 دليل نظام المخزون المحسّن - SH Parts

## 🎯 نظرة عامة

نظام مخزون احترافي ومتكامل لإدارة قطع غيار السيارات مع ميزات متقدمة للتحليل والتقارير.

---

## 🌐 الصفحات الرئيسية

### 1. صفحة المخزون الرئيسية 📦
**الرابط:** `/inventory/`

#### الميزات:
- **إحصائيات سريعة** (5 بطاقات):
  - إجمالي القطع
  - القطع المتوفرة
  - القطع منخفضة المخزون
  - قيمة المخزون
  - الربح المتوقع ⭐

- **نظام بحث وتصفية متقدم**:
  - بحث سريع (SKU, اسم, باركود)
  - فلتر الحالة (متعدد الاختيار)
  - فلتر الحالة الفيزيائية (متعدد الاختيار)
  - فلتر الفئة
  - فلتر الموقع
  - نطاق السعر (من - إلى)
  - نطاق التاريخ (من - إلى)
  - ترتيب متقدم (8 خيارات)

- **عرضين مختلفين**:
  - **عرض البطاقات**: تصميم جذاب مع معلومات مختصرة
  - **عرض الجدول**: عرض تفصيلي شامل

- **أدوات التصدير**:
  - تصدير Excel
  - طباعة محسّنة

- **روابط سريعة**:
  - لوحة التحكم
  - تقرير الربحية
  - نظام الجرد

#### كيفية الاستخدام:
1. افتح `/inventory/`
2. استخدم البحث أو الفلاتر للعثور على القطع
3. بدّل بين عرض البطاقات والجدول حسب الحاجة
4. انقر "عرض" لرؤية تفاصيل القطعة
5. انقر "تعديل سريع" لتحديث البيانات بسرعة
6. استخدم "تصدير Excel" لتحليل البيانات خارجياً

---

### 2. صفحة تفاصيل القطعة 📋
**الرابط:** `/inventory/item/?id=X`

#### الأقسام:
- **معلومات أساسية**: SKU, اسم, فئة, حالة, باركود, تاريخ
- **معلومات السعر والربح**: كلفة, بيع, ربح/وحدة, إجمالي ربح, نسبة
- **معلومات المخزون**: كمية, حد أدنى, موقع, تنبيهات
- **معلومات السيارة المصدر**: VIN, ماركة, موديل, سنة
- **QR Code**: مع إمكانية الطباعة المنفصلة
- **معرض الصور**: (قيد التطوير)
- **سجل الحركات**: Timeline تفاعلي
- **سجل المبيعات**: (قيد التطوير)
- **الملاحظات**: مع حفظ
- **سجل التدقيق**: (قيد التطوير)

#### كيفية الاستخدام:
1. انقر "عرض" من صفحة المخزون
2. راجع جميع المعلومات التفصيلية
3. اطبع QR Code إذا لزم الأمر
4. أضف أو عدّل الملاحظات
5. راجع سجل الحركات
6. اطبع الصفحة للأرشفة

---

### 3. لوحة تحكم المخزون 📊
**الرابط:** `/inventory/dashboard/`

#### المقاييس الرئيسية:
- إجمالي القطع
- قيمة المخزون (كلفة)
- الإيرادات المتوقعة
- الربح المتوقع

#### الرسوم البيانية:
1. **توزيع القطع حسب الحالة** (Pie Chart)
2. **توزيع القطع حسب الفئة** (Bar Chart)
3. **قيمة المخزون - آخر 30 يوم** (Line Chart)
4. **الربح المتوقع - آخر 30 يوم** (Line Chart)

#### القوائم:
- أعلى 10 قطع ربحاً (مع ميداليات)
- أقل 10 قطع ربحاً

#### معدل الدوران:
- قطع بطيئة الحركة (>90 يوم)
- قطع متوسطة الحركة (30-90 يوم)
- قطع سريعة الحركة (<30 يوم)
- متوسط الدوران (بالأيام)

#### كيفية الاستخدام:
1. افتح `/inventory/dashboard/`
2. راجع المقاييس الرئيسية
3. حلل الرسوم البيانية
4. راجع القوائم لتحديد القطع الأكثر/الأقل ربحاً
5. راقب معدل الدوران لتحسين المخزون
6. انقر "تحديث" لتحديث البيانات

---

### 4. تقرير الربحية 💰
**الرابط:** `/inventory/profitability/`

#### الإحصائيات:
- إجمالي الكلفة
- إجمالي البيع المتوقع
- إجمالي الربح المتوقع
- نسبة الربح

#### الرسوم البيانية:
- أعلى 10 قطع ربحاً (Bar Chart)
- توزيع الربح حسب الفئة (Pie Chart)

#### الجداول:
1. **تقرير حسب القطعة**: SKU, اسم, فئة, كمية, أسعار, ربح
2. **تقرير حسب الفئة**: تجميع حسب الفئة
3. **تقرير حسب السيارة المصدر**: VIN, ماركة, موديل

#### الفلاتر:
- نطاق التاريخ (من - إلى)
- فلتر الفئة

#### كيفية الاستخدام:
1. افتح `/inventory/profitability/`
2. حدد نطاق التاريخ والفئة
3. انقر "تطبيق"
4. راجع الإحصائيات والرسوم البيانية
5. راجع الجداول التفصيلية
6. صدّر إلى Excel للتحليل الإضافي
7. اطبع التقرير للأرشفة

---

### 5. نظام الجرد 📋
**الرابط:** `/inventory/count/`

#### الميزات:
- **إدارة الجلسات**:
  - إنشاء جلسة جرد جديدة
  - استئناف الجلسة النشطة
  - إلغاء الجلسة

- **الجرد**:
  - عرض جميع القطع المتوفرة
  - إدخال الكميات الفعلية
  - مقارنة تلقائية مع النظام
  - عرض الفروقات بألوان

- **الفلاتر**:
  - فلتر الفئة
  - فلتر الموقع
  - فلتر حالة الجرد

- **التقدم**:
  - شريط تقدم ديناميكي
  - عداد القطع المجردة

- **ملخص الفروقات**:
  - عرض تلقائي للفروقات
  - تفاصيل كل فرق

#### كيفية الاستخدام:
1. افتح `/inventory/count/`
2. انقر "جلسة جرد جديدة"
3. استخدم الفلاتر لتضييق النطاق (اختياري)
4. أدخل الكميات الفعلية لكل قطعة
5. راقب شريط التقدم
6. راجع ملخص الفروقات
7. انقر "إتمام الجرد"
8. أكّد التحديث

**ملاحظة:** يتم حفظ الجلسة تلقائياً، يمكنك الخروج والعودة لاحقاً.

---

## 🎨 التصميم

### الثيمات المدعومة:
- ✅ Dark Theme
- ✅ Light Theme
- ✅ Blue Theme
- ✅ Day Blue Theme
- ✅ Green Theme

### Responsive:
- ✅ Desktop (1920px+)
- ✅ Laptop (1366px+)
- ✅ Tablet (768px+)
- ✅ Mobile (320px+)

---

## 🔧 التقنيات المستخدمة

- **Backend**: Django 5.1.4
- **Frontend**: HTML5, CSS3, JavaScript ES6
- **UI Framework**: Bootstrap 5 RTL
- **Charts**: Chart.js 4.4.0
- **Excel Export**: SheetJS (xlsx)
- **Icons**: Bootstrap Icons

---

## 📊 الإحصائيات

- **عدد الصفحات**: 5
- **عدد الميزات**: 50+
- **عدد الرسوم البيانية**: 6
- **عدد الفلاتر**: 8
- **عدد المقاييس**: 15+
- **الأسطر المكتوبة**: ~3,800

---

## 🚀 نصائح للاستخدام الأمثل

### 1. المخزون الرئيسي:
- استخدم البحث السريع للعثور على قطعة محددة
- استخدم الفلاتر المتعددة معاً للحصول على نتائج دقيقة
- بدّل بين العرضين حسب الحاجة
- صدّر إلى Excel للتحليل المتقدم

### 2. لوحة التحكم:
- راجعها يومياً لمتابعة الأداء
- راقب القطع بطيئة الحركة
- حدد القطع الأكثر ربحاً للتركيز عليها

### 3. تقرير الربحية:
- راجعه شهرياً لتقييم الأداء
- قارن بين الفئات المختلفة
- حدد القطع غير المربحة للتخلص منها

### 4. نظام الجرد:
- أجرِ جرداً شهرياً على الأقل
- استخدم الفلاتر لجرد فئة واحدة في كل مرة
- راجع الفروقات بعناية قبل الإتمام

### 5. تفاصيل القطعة:
- أضف ملاحظات مفيدة لكل قطعة
- اطبع QR Code للقطع المهمة
- راجع سجل الحركات لفهم النشاط

---

## 🔐 الأمان

- جميع الصفحات محمية بـ `@login_required`
- جميع API calls تتطلب authentication
- CSRF protection مفعّل
- Session management آمن

---

## 📞 الدعم

للمساعدة أو الاستفسارات، راجع:
- `INVENTORY_COMPLETE_SUMMARY.md` - ملخص شامل
- `INVENTORY_DEVELOPMENT_PLAN.md` - خطة التطوير
- `FIXES_SUMMARY.md` - سجل الإصلاحات

---

**تم بحمد الله! 🎉**

